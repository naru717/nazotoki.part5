<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>ã¨ã›ã„ãã‚“ã®è¬è§£ã ç¬¬ï¼•å¼¾</title>
<style>
  :root{
    --bg:#fff7fb; --card:#ffffff; --text:#1f2937; --muted:#6b7280;
    --accent:#ff7ac6; --ok:#16a34a; --ng:#ef4444; --ring:#ffd5ec;
    --gold:#ffcc66; --spark:#fff2a8; --focus:#ffb3dc;
  }
  html,body{height:100%}
  body{
    margin:0; background:linear-gradient(180deg,#fff7fb 0%, #f5fbff 100%);
    color:var(--text);
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Hiragino Kaku Gothic ProN","Yu Gothic",Meiryo,Arial,sans-serif;
    -webkit-tap-highlight-color:transparent;
  }
  .wrap{max-width:900px; margin:0 auto; padding:20px 16px 80px;}
  header{display:flex; align-items:center; gap:12px; margin:6px 0 10px;}
  header h1{font-size:26px; margin:0;}
  .mascot{width:40px; height:40px; border-radius:12px; box-shadow:0 6px 16px rgba(0,0,0,.08);}
  .card{background:var(--card); border-radius:20px; box-shadow:0 10px 24px rgba(255,122,198,.15);
        padding:18px; margin:14px 0; border:2px solid var(--ring);}
  .question{font-size:20px; font-weight:800; margin:8px 0 4px;}
  .lead{color:var(--muted); margin-top:2px;}
  .choices{display:grid; gap:10px; margin-top:12px;}
  .choice-btn{width:100%; text-align:left; padding:14px 16px; border-radius:16px; border:2px solid #e7f2ff; background:#fff; cursor:pointer; font-size:16px;}
  .choice-btn:hover{border-color:#cfe7ff; background:#f7fbff;}
  .result{margin-top:10px; font-weight:900; font-size:18px;}
  .ok{color:var(--ok);} .ng{color:var(--ng);}
  .subtitle{font-weight:900; color:#1f2937; margin:6px 0 10px; font-size:18px;}
  .muted-box{background:#fff5fa; border:2px dashed #ffd2ea; padding:10px 12px; border-radius:14px; color:#374151;}
  .explain{margin-top:12px; text-align:left; background:#f7fbff; border:2px solid #dbeafe; border-radius:14px; padding:12px;}
  .fade{animation:fade .25s ease;}
  @keyframes fade{from{opacity:0; transform:translateY(4px)} to{opacity:1; transform:none}}
  @media (max-width:560px){
    header h1{font-size:22px}
    .question{font-size:18px}
    .choice-btn{font-size:15px; padding:14px}
  }

  .btn{
    display:inline-block; padding:14px 18px; border-radius:16px; border:none; cursor:pointer; font-size:16px;
    background:linear-gradient(90deg,var(--accent),#ffa7d8); color:#fff; box-shadow:0 8px 18px rgba(255,122,198,.35);
  }
  .btn:disabled{opacity:.6; cursor:not-allowed;}
  .btn.alt{background:linear-gradient(90deg,#8ec5ff,#b5e1ff);}

  .form-vertical{display:flex; flex-direction:column; gap:12px;}
  label{font-size:14px; color:#6b7280; margin-bottom:6px;}
  input{
    width:100%; padding:14px 14px; font-size:16px; border-radius:14px; border:2px solid #ffdff0; background:#fff; outline:none;
  }
  input:focus{border-color:var(--focus); box-shadow:0 0 0 4px #ffe6f4;}

  .hero{ display:flex; flex-direction:column; align-items:center; text-align:center; gap:10px; }
  .hero img{ width:min(68vw, 300px); height:auto; border-radius:24px; box-shadow:0 10px 26px rgba(0,0,0,.12); }

  .speech{
    background:#ffffff; border:2px solid #ffd5ec; border-radius:18px; padding:12px 14px; line-height:1.7;
    position:relative; max-width:680px;
  }
  .speech:after{content:""; position:absolute; top:100%; left:50%; transform:translateX(-50%); border:10px solid transparent; border-top-color:#ffd5ec;}
  .speech:before{content:""; position:absolute; top:calc(100% + 2px); left:50%; transform:translateX(-50%); border:10px solid transparent; border-top-color:#ffffff;}

  .type-line{min-height:1.8em; white-space:pre-wrap; line-height:1.9;}
  .pause-dot{animation:blink 1.4s ease-in-out infinite;}
  @keyframes blink{0%,100%{opacity:.2} 50%{opacity:1}}

  .stamp{position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(255,255,255,.75); z-index:50;}
  .stamp img{width:min(70vw,380px); height:auto; filter:drop-shadow(0 10px 24px rgba(0,0,0,.2)); animation:pop .5s ease;}
  @keyframes pop{0%{transform:scale(.6) rotate(-6deg); opacity:0}60%{transform:scale(1.05) rotate(2deg); opacity:1}100%{transform:scale(1) rotate(0)}}

  /* ===== æŠ•ç¥¨UIã‚’è¦‹ã‚„ã™ããƒ»æŠ¼ã—ã‚„ã™ã ===== */
  .vote-wrap{margin-top:12px;}
  .vote-grid{
    display:grid; gap:12px;
    grid-template-columns: 1fr;
  }
  @media (min-width:720px){
    .vote-grid{ grid-template-columns: 1fr 1fr; }
  }
  .vote-card{
    display:flex; align-items:center; gap:12px;
    padding:14px 16px; border-radius:16px; background:#fff;
    border:2px solid #ffe0f2; box-shadow:0 6px 14px rgba(255,122,198,.10);
    cursor:pointer; position:relative;
  }
  .vote-card:hover{ border-color:#ffcae9; background:#fff8fc; }
  .vote-card:focus-within{ outline:none; border-color:var(--focus); box-shadow:0 0 0 4px #ffe6f4; }
  .vote-title{ font-size:18px; font-weight:900; letter-spacing:.01em; }
  .vote-sub{ font-size:12px; color:#6b7280; }
  .vote-radio{ position:absolute; inset:0; opacity:0; }
  .vote-check{
    margin-left:auto; min-width:28px; height:28px; width:28px; border-radius:50%;
    border:2px solid #ffd2ea; display:flex; align-items:center; justify-content:center; font-size:16px; color:#fff;
    background:#fff;
  }
  .vote-card.selected{
    border-color:#ff7ac6; background:linear-gradient(180deg,#fff,#fff8fc);
    box-shadow:0 8px 18px rgba(255,122,198,.18);
  }
  .vote-card.selected .vote-check{
    background:#ff7ac6; border-color:#ff7ac6;
  }

  /* é€ä¿¡ãƒœã‚¿ãƒ³ã‚’ä¸‹éƒ¨ã«å›ºå®šï¼ˆãƒ¢ãƒã‚¤ãƒ«ã§æŠ¼ã—ã‚„ã™ãï¼‰ */
  .sticky-actions{
    position:sticky; bottom:-16px; padding-top:10px;
    background:linear-gradient(180deg, rgba(255,255,255,0), #fff7fb 40%, #fff7fb 100%);
    display:flex; justify-content:center;
  }

  /* ãƒˆãƒ¼ã‚¹ãƒˆ */
  .toast{
    position:fixed; left:50%; bottom:20px; transform:translateX(-50%);
    background:#111; color:#fff; padding:10px 14px; border-radius:12px;
    opacity:.95; z-index:9999; box-shadow:0 6px 18px rgba(0,0,0,.25);
  }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <img src="mame2.png" alt="ã¨ã›ã„ãã‚“ï¼ˆç¬¬5å¼¾ï¼‰" class="mascot" />
      <h1>ã¨ã›ã„ãã‚“ã®è¬è§£ã ç¬¬ï¼•å¼¾</h1>
    </header>

    <!-- 1ãƒšãƒ¼ã‚¸ç›®ï¼šãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å…¥åŠ› -->
    <section id="p1-intro" class="card fade">
      <div class="hero">
        <img src="mame2.png" alt="ã¨ã›ã„ãã‚“ï¼ˆç¬¬5å¼¾ï¼‰" />
        <div class="speech">
          <strong>ã¼ãã¯ ã¨ã›ã„ãã‚“ã€‚</strong><br>
          <strong>ç¬¬ï¼•å¼¾</strong>ã¸ã‚ˆã†ã“ãï¼ ã¾ãšã¯<strong>å›ã®ã“ã¨æ•™ãˆã¦</strong>ã­ã€‚
        </div>
      </div>

      <div style="height:8px;"></div>

      <div class="form-vertical">
        <div>
          <label for="name">åå‰</label>
          <input id="name" type="text" placeholder="ä¾‹ï¼‰ãƒ•ãƒ«ãƒãƒ¼ãƒ " />
        </div>
        <div>
          <label for="group">æ‰€å±</label>
          <input id="group" type="text" placeholder="ä¾‹ï¼‰å¤–æ¥ï¼ã€‡ã€‡ç—…æ£Ÿï¼ãƒªãƒ ãªã©" />
        </div>
        <div>
          <label for="job">è·ç¨®</label>
          <input id="job" type="text" placeholder="ä¾‹ï¼‰çœ‹è­·å¸«ï¼åŒ»å¸«ï¼è–¬å‰¤å¸« ãªã©" />
        </div>
      </div>

      <div style="margin-top:16px;">
        <button class="btn" onclick="goP2()">æ¬¡ã¸</button>
      </div>
    </section>

    <!-- 2ãƒšãƒ¼ã‚¸ç›®ï¼šå…¨ãƒãƒ¼ãƒ è¡¨ç¤º -->
    <section id="p2-teams" class="card fade" style="display:none;">
      <div class="hero">
        <img src="toseikirakira.png" alt="ã‚­ãƒ©ã‚­ãƒ©ã¨ã›ã„ãã‚“" />
        <div class="speech">
          <div class="type-line"><strong>ä»Šæ—¥ã¯ã‚­ãƒŸã®æ¨ã—ãƒãƒ¼ãƒ ã‚’æ•™ãˆã¦æ¬²ã—ã„ã‚“ã ã€‚</strong></div>
          <div class="type-line" style="margin-top:6px;">ãã‚Œãã‚Œã®ãƒãƒ¼ãƒ ã®<strong>æ„æ°—è¾¼ã¿ã¯ç¬¬ï¼”å¼¾ã§ç´¹ä»‹</strong>ã—ã¦ã„ã‚‹ã‹ã‚‰ã€ã¿ã¦ã¿ã¦ã­ã€‚</div>
        </div>
      </div>

      <div class="muted-box" style="margin-top:12px;">
        <div class="ending-badge" style="display:inline-block;padding:.3rem .7rem;border-radius:9999px;background:#fff; border:1px solid #ffd5ec;">TMCå‡ºå ´ãƒãƒ¼ãƒ ä¸€è¦§</div>
        <ul id="team-list-view" style="text-align:left; margin:8px 0 0; padding-left:18px;"></ul>
      </div>

      <div style="margin-top:14px; text-align:center;">
        <button class="btn" onclick="goP3()">æ¬¡ã¸</button>
      </div>
    </section>

    <!-- 3ãƒšãƒ¼ã‚¸ç›®ï¼šè¬è§£ã å°å…¥ï¼‹Q1 -->
    <section id="p3-quiz1" class="card fade" style="display:none;">
      <div class="hero">
        <img src="mame2.png" alt="ã¨ã›ã„ãã‚“" />
        <div class="speech">
          <div class="type-line">ã¾ãšã¯TMCã«ã‚‚æ—¥å¸¸ã®çœ‹è­·ã®ç¾å ´ã§ã‚‚å½¹ç«‹ã¤è¬è§£ãã ã€‚</div>
          <div class="type-line" style="margin-top:6px;">
            ãƒ†ãƒ¼ãƒï¼š<strong>åŒ»ç™‚é–¢é€£æ„ŸæŸ“ç—‡ï¼ˆãƒãƒ«ãƒ³ã‚«ãƒ†ãƒ¼ãƒ†ãƒ«ç®¡ç†ï¼‰</strong>ã¨<strong>è¤¥ç˜¡äºˆé˜²å¯¾ç­–</strong><br>
            ã€Œä»Šå›ã¯ãƒãƒ«ãƒ³ã‚«ãƒ†ãƒ¼ãƒ†ãƒ«ç®¡ç†ã¨è¤¥ç˜¡ï¼ˆã˜ã‚‡ããã†ï¼‰äºˆé˜²ã«ã¤ã„ã¦è€ƒãˆã¦ã¿ã‚ˆã†ï¼ã€
          </div>
          <div class="type-line" style="margin-top:6px;">
            ã€Œä»Šæ—¥ã®æ‹…å½“æ‚£è€…ã•ã‚“ã¯ã€<strong>æ¡œé™¶å­ã•ã‚“ï¼ˆ88æ­³ï¼‰</strong>ã€‚<br>
            ã‚‚ã¨ã‚‚ã¨ã¯è‡ªç«‹ã—ã¦ä¸€äººæš®ã‚‰ã—ã—ã¦ãŸã‘ã©ã€<br>
            å¤§è…¿éª¨é ¸éƒ¨éª¨æŠ˜ã§ç·Šæ€¥å…¥é™¢ã—ã¦ã€æ‰‹è¡“å¾Œã«æ•´å½¢å¤–ç§‘ç—…æ£Ÿã§ç™‚é¤Šä¸­ãªã‚“ã ã€‚ã€
          </div>
        </div>
      </div>

      <div class="question" style="margin-top:10px;">ğŸ” ãªãâ‘ ï¼šãƒãƒ«ãƒ³ã®ä½ç½®ã€ã“ã‚Œã§ã„ã„ã®ã‹ãªï¼Ÿ</div>
      <div class="lead">è¡“å¾Œ2æ—¥ç›®ã€‚ã¾ã ç—›ã¿ãŒå¼·ãã¦ãƒªãƒãƒ“ãƒªãŒé€²ã¾ãªã„é™¶å­ã•ã‚“ã€‚<br>ãƒãƒ«ãƒ³ã‚«ãƒ†ãƒ¼ãƒ†ãƒ«ãŒã¤ã„ã¦ã‚‹ã‘ã©â€¦ã©ã“ãŒã¾ã¡ãŒã£ã¦ã‚‹ï¼Ÿ</div>
      <div class="choices" id="q1-choices"></div>
      <div id="q1-judge" class="result"></div>
      <div id="q1-explain" class="explain" style="display:none;"></div>
      <div id="q1-after-img" style="display:none; text-align:center; margin-top:10px;">
        <img src="barun.png" alt="ãƒãƒ«ãƒ³æ­£ã—ã„ä½ç½®ä¾‹" style="max-width:280px; border-radius:16px; box-shadow:0 6px 18px rgba(0,0,0,.12);" />
      </div>
      <div id="q1-next" style="display:none; margin-top:12px; text-align:center;">
        <button class="btn" onclick="goP4()">æ¬¡ã¸</button>
      </div>
    </section>

    <!-- 4ãƒšãƒ¼ã‚¸ç›®ï¼šQ2 -->
    <section id="p4-quiz2" class="card fade" style="display:none;">
      <div class="hero">
        <img src="barun2.png" alt="é«˜æ©Ÿèƒ½ãƒãƒƒãƒˆãƒ¬ã‚¹" />
      </div>
      <div class="question">ãªãâ‘¡ï¼šé«˜æ©Ÿèƒ½ãƒãƒƒãƒˆãƒ¬ã‚¹ã€è¨­å®šã¯ã©ã†ã™ã‚‹ï¼Ÿ</div>
      <div class="lead">é™¶å­ã•ã‚“ã¯ä½“ã‚’å‹•ã‹ã™ã®ãŒã‚€ãšã‹ã—ã„ã‹ã‚‰ã€é«˜æ©Ÿèƒ½ãƒãƒƒãƒˆãƒ¬ã‚¹ã‚’ä½¿ç”¨ä¸­ã€‚<br>ã©ã‚ŒãŒã¾ã¡ãŒã£ã¦ã‚‹ã‹ãªï¼Ÿ</div>
      <div class="choices" id="q2-choices"></div>
      <div id="q2-judge" class="result"></div>
      <div id="q2-explain" class="explain" style="display:none;"></div>
      <div id="q2-next" style="display:none; margin-top:12px; text-align:center;">
        <button class="btn" onclick="goP5()">æ¬¡ã¸</button>
      </div>
    </section>

    <!-- 5ãƒšãƒ¼ã‚¸ç›®ï¼šQ3 -->
    <section id="p5-quiz3" class="card fade" style="display:none;">
      <div class="hero">
        <img src="barun3.png" alt="ADLè©•ä¾¡" />
      </div>
      <div class="question">ãªãâ‘¢ï¼šADLã®è©•ä¾¡ã€ã©ã£ã¡ã‚’è¦‹ã‚‹ï¼Ÿ</div>
      <div class="lead">å…¥é™¢å‰ã¯æ­©ã‘ã¦ãŸé™¶å­ã•ã‚“ã€‚ã§ã‚‚ä»Šã¯ä»‹åŠ©ã§è»Šæ¤…å­ç§»ä¹—ã€ã»ã¼ãƒ™ãƒƒãƒ‰ä¸Šã§éã”ã—ã¦ã‚‹ã¿ãŸã„ã€‚<br>ã©ã‚ŒãŒã¾ã¡ãŒã£ã¦ã‚‹ï¼Ÿ</div>
      <div class="choices" id="q3-choices"></div>
      <div id="q3-judge" class="result"></div>
      <div id="q3-explain" class="explain" style="display:none;"></div>
      <div id="q3-next" style="display:none; margin-top:12px; text-align:center;">
        <button class="btn" onclick="goP6()">æ¬¡ã¸</button>
      </div>
    </section>

    <!-- 6ãƒšãƒ¼ã‚¸ç›®ï¼šQ4 -->
    <section id="p6-quiz4" class="card fade" style="display:none;">
      <div class="hero">
        <img src="barun4.png" alt="è»Šæ¤…å­ç§»ä¹—æ™‚ã®æ³¨æ„" />
      </div>
      <div class="question">ãªãâ‘£ï¼šè»Šæ¤…å­ç§»ä¹—ã®ã¨ãã®æ³¨æ„ï¼</div>
      <div class="lead">ãƒªãƒãƒ“ãƒªã§è»Šæ¤…å­ã«ç§»ã‚‹é™¶å­ã•ã‚“ã€‚ã©ã‚ŒãŒã¾ã¡ãŒã£ã¦ã‚‹ï¼Ÿ</div>
      <div class="choices" id="q4-choices"></div>
      <div id="q4-judge" class="result"></div>
      <div id="q4-explain" class="explain" style="display:none;"></div>
      <div id="q4-next" style="display:none; margin-top:12px; text-align:center;">
        <button class="btn" onclick="goP7()">æ¬¡ã¸</button>
      </div>
    </section>

    <!-- 7ãƒšãƒ¼ã‚¸ç›®ï¼šã¾ã¨ã‚ -->
    <section id="p7-summary" class="card fade" style="display:none;">
      <div class="hero">
        <img src="nazotoki2.png" alt="ã¾ã¨ã‚ã¨ã›ã„ãã‚“" />
        <div class="speech">
          <div class="type-line"><strong>ã¨ã›ã„ãã‚“ã®ã¾ã¨ã‚</strong></div>
          <div class="type-line" style="margin-top:6px;">
            ãƒ»ãƒãƒ«ãƒ³ãƒãƒƒã‚°ã¯<strong>ä½ãã€ã§ã‚‚åºŠã«ã¯ã¤ã‘ãªã„ï¼</strong><br>
            ãƒ»ãƒãƒƒãƒˆãƒ¬ã‚¹ã¯<strong>åœ§åˆ‡ã‚Šæ›¿ãˆå‹</strong>ã§è¨­å®šãƒã‚§ãƒƒã‚¯ï¼<br>
            ãƒ»ADLã¯<strong>â€œä»Šã®çŠ¶æ…‹â€</strong>ã§è©•ä¾¡ï¼<br>
            ãƒ»æ¡å°¿è¢‹ã¯<strong>ç©ºã«ã—ã¦é€†æµé˜²æ­¢ï¼</strong><br>
            ãƒ»å®šæœŸçš„ãªé™¤åœ§ï¼†çš®è†šè¦³å¯Ÿã§<strong>è¤¥ç˜¡ãƒ»MDRPU</strong>ã‚’é˜²ã”ã†ï¼
          </div>
          <div class="type-line" style="margin-top:6px;">
            ã€Œãµã…ã€œä»Šæ—¥ã®ãªãã¨ãã‚‚ãªã‹ãªã‹æ·±ã‹ã£ãŸã­ï¼<br>
            å°ã•ãªâ€œæ°—ã¥ãâ€ãŒæ‚£è€…ã•ã‚“ã‚’å®ˆã‚‹å¤§ããªåŠ›ã«ãªã‚‹ã‚“ã ã‚ˆã€‚<br>
            æ¬¡ã®ãªãã‚‚ä¸€ç·’ã«è§£ã„ã¦ã„ã“ã†ã­â™ªã€
          </div>
        </div>
      </div>
      <div style="margin-top:14px; text-align:center;">
        <button class="btn" onclick="goP8()">æ¬¡ã¸</button>
      </div>
    </section>

    <!-- 8ãƒšãƒ¼ã‚¸ç›®ï¼šæ¨ã—ãƒãƒ¼ãƒ æŠ•ç¥¨ï¼ˆæ”¹è‰¯UIï¼‰ -->
    <section id="p8-vote" class="card fade" style="display:none;">
      <div class="hero">
        <img src="mame2.png" alt="æŠ•ç¥¨ã¨ã›ã„ãã‚“" />
        <div class="speech">
          <div class="type-line"><strong>æ¨ã—ãƒãƒ¼ãƒ ã«æ¸…ãä¸€ç¥¨ã‚’ï¼</strong></div>
          <div class="type-line" style="margin-top:6px;">ã‚¿ãƒƒãƒ—ã§é¸æŠ â†’ ä¸‹ã®<strong>æ±ºå®š</strong>ã‚’æŠ¼ã™ã¨é€ä¿¡ã™ã‚‹ã‚ˆã€‚</div>
        </div>
      </div>

      <div class="vote-wrap">
        <div id="vote-grid" class="vote-grid" role="radiogroup" aria-label="æ¨ã—ãƒãƒ¼ãƒ ã‚’é¸æŠ"></div>
        <div class="sticky-actions" style="margin-top:12px;">
          <button id="vote-submit" class="btn alt" onclick="submitVote()">æ±ºå®šï¼ˆé€ä¿¡ï¼‰</button>
        </div>
      </div>
    </section>

    <!-- 9ãƒšãƒ¼ã‚¸ç›®ï¼šãƒ©ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
    <section id="p9-last" class="card fade" style="display:none;">
      <div class="hero">
        <img src="nazotoki2.png" alt="ãƒ©ã‚¹ãƒˆ" style="width:min(60vw,180px);height:auto;border-radius:24px;box-shadow:0 10px 26px rgba(0,0,0,.12);" />
        <div class="speech">
          <div class="type-line"><strong>TMCã®ç´¹ä»‹</strong></div>
          <div class="type-line" style="margin-top:6px;">
            ã¤ã„ã«<strong>12æœˆ20æ—¥ TMCé–‹å‚¬</strong>ã ï¼ï¼<br>
            ã¿ã‚“ãªã§å¿œæ´ã—ã‚ˆã†ã€‚<br>
            å‚åŠ è€…ãƒ»ã‚µãƒãƒ¼ã‚¿ãƒ¼ã®ã¿ã‚“ãªã‚‚ã€<strong>ãŒã‚“ã°ã£ã¦ã­ï¼</strong>
          </div>
        </div>
      </div>
    </section>

  </div>

  <!-- ã‚¹ã‚¿ãƒ³ãƒ— -->
  <div id="stamp" class="stamp" aria-hidden="true">
    <img src="nazotoki2.png" alt="æ­£è§£ã‚¹ã‚¿ãƒ³ãƒ—" />
  </div>

  <!-- éŸ³æº -->
  <audio id="bgmTeams" src="hajimari.mp3" preload="none" loop></audio>
  <audio id="bgmQuiz"  src="nazotoki.mp3" preload="none" loop></audio>
  <audio id="seClick"  src="pochi.mp3" preload="auto"></audio>
  <audio id="seSuccess" src="seikou.mp3" preload="auto"></audio>
  <audio id="seCorrect" src="pinpon.mp3" preload="auto"></audio>

<script>
/* ====== Googleãƒ•ã‚©ãƒ¼ãƒ  é€ä¿¡è¨­å®šï¼ˆå¿…è¦ãªã‚‰è¨­å®šï¼‰ ====== */
const GOOGLE_FORM_ACTION = "https://docs.google.com/forms/d/e/1FAIpQLScG2ytOrT82JTSBKFJ9WfnDVLHZK284CDa34H7F__lwpQOaJw/formResponse";  

// å„é …ç›®ã® entry ç•ªå·ï¼ˆã‚ãªãŸã®ãƒ•ã‚©ãƒ¼ãƒ ã«å¯¾å¿œï¼‰
const ENTRY_NAME = "entry.671897270";   // åå‰
const ENTRY_DEPT = "entry.278938549";   // æ‰€å±
const ENTRY_JOB  = "entry.691760735";   // è·ç¨®
const ENTRY_VOTE = "entry.1492918324";  // æ¨ã—ãƒãƒ¼ãƒ 


/* ====== DOMå‚ç…§ ====== */
const nameEl  = document.getElementById('name');
const groupEl = document.getElementById('group');
const jobEl   = document.getElementById('job');

const p1 = document.getElementById('p1-intro');
const p2 = document.getElementById('p2-teams');
const p3 = document.getElementById('p3-quiz1');
const p4 = document.getElementById('p4-quiz2');
const p5 = document.getElementById('p5-quiz3');
const p6 = document.getElementById('p6-quiz4');
const p7 = document.getElementById('p7-summary');
const p8 = document.getElementById('p8-vote');
const p9 = document.getElementById('p9-last');

function hideAll(){ [p1,p2,p3,p4,p5,p6,p7,p8,p9].forEach(e=>e.style.display='none'); }
function show(el){ hideAll(); el.style.display='block'; window.scrollTo({top:0,behavior:'smooth'}); }
show(p1);

/* ====== ã‚µã‚¦ãƒ³ãƒ‰ ====== */
const bgmTeams = document.getElementById('bgmTeams');   // 2,8ãƒšãƒ¼ã‚¸
const bgmQuiz  = document.getElementById('bgmQuiz');    // 3ã€œ7ãƒšãƒ¼ã‚¸
const seClick  = document.getElementById('seClick');
const seSuccess= document.getElementById('seSuccess');
const seCorrect= document.getElementById('seCorrect');

/* ã‚¯ãƒªãƒƒã‚¯SEï¼šdata-se="none" ã®ãƒœã‚¿ãƒ³ã¯é³´ã‚‰ã•ãªã„ */
document.addEventListener('click', e=>{
  const btn = e.target.closest('button');
  if(!btn) return;
  if(btn.dataset.se === 'none') return;  // â˜…é¸æŠè‚¢ãªã©ã¯ã‚¯ãƒªãƒƒã‚¯SEã‚’æŠ‘åˆ¶
  try{ seClick.currentTime = 0; seClick.play(); }catch(e){}
}, true);

/* ====== å…±é€šï¼šãƒˆãƒ¼ã‚¹ãƒˆ ====== */
function toast(msg){
  const t=document.createElement('div');
  t.className="toast"; t.textContent=msg;
  document.body.appendChild(t);
  setTimeout(()=>t.remove(), 1800);
}

/* ====== Googleãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ï¼ˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ï¼‰ ====== */
function sendProfile(){
  if(!GOOGLE_FORM_ACTION) return;
  const params = new URLSearchParams();
  params.append(ENTRY_NAME, nameEl.value ?? "");
  params.append(ENTRY_DEPT, groupEl.value ?? "");
  params.append(ENTRY_JOB,  jobEl.value ?? "");
  params.append("submit", "Submit");
  fetch(GOOGLE_FORM_ACTION, {
    method: "POST", mode: "no-cors",
    headers: { "Content-Type": "application/x-www-form-urlencoded" },
    body: params
  }).catch(()=>{});
}

/* ====== ãƒãƒ¼ãƒ é…åˆ— ====== */
const teams = [
  "å¸«é•·ä¼šéšˆ","SiziU","Team BONE","ã‚±ãƒ¢ãƒ¡ã‚¤ãƒˆãƒ¬ãƒ³ã‚¸ãƒ£ãƒ¼ã‚º",
  "é™¶ç”Ÿå‹æ‰‹ã«ç››ã‚Šä¸Šã’éšŠ","å¤–ç§‘ã®ä¸€å‘³","ãƒ‘ãƒ¯ãƒ•ãƒ«ãƒãƒ¼ãƒ ","ã²ã’ç”·çˆµ"
];

/* ====== ä¸€è¦§ã¨æŠ•ç¥¨UIã®æç”» ====== */
(function renderListAndVotes(){
  // ä¸€è¦§
  const ul = document.getElementById('team-list-view');
  teams.forEach(t => { const li = document.createElement('li'); li.textContent = t; ul.appendChild(li); });

  // æŠ•ç¥¨
  const grid = document.getElementById('vote-grid');
  teams.forEach((t,i)=>{
    const card = document.createElement('label');
    card.className = "vote-card";
    card.setAttribute('tabindex','0');
    card.innerHTML = `
      <div>
        <div class="vote-title">${t}</div>
        <div class="vote-sub">ã‚¿ãƒƒãƒ—ã—ã¦é¸æŠ</div>
      </div>
      <div class="vote-check" aria-hidden="true">âœ“</div>
      <input class="vote-radio" type="radio" name="voteTeam" value="${t}" />
    `;
    // é¸æŠè¡¨ç¤ºã®åŒæœŸ
    const radio = card.querySelector('.vote-radio');
    function selectThis(){
      document.querySelectorAll('.vote-card').forEach(c=>c.classList.remove('selected'));
      radio.checked = true;
      card.classList.add('selected');
    }
    card.addEventListener('click', selectThis);
    card.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); selectThis(); }});
    grid.appendChild(card);
  });
})();

/* ====== ç”»é¢é·ç§» ====== */
function goP2(){
  if(!nameEl.value.trim()){ nameEl.focus(); nameEl.style.borderColor= '#ff8dc7'; return; }
  if(!groupEl.value.trim()){ groupEl.focus(); groupEl.style.borderColor='#ff8dc7'; return; }
  if(!jobEl.value.trim()){   jobEl.focus();   jobEl.style.borderColor= '#ff8dc7'; return; }
  nameEl.style.borderColor=groupEl.style.borderColor=jobEl.style.borderColor='#ffdff0';
  sendProfile(); // å¿…è¦ã«å¿œã˜ã¦ãƒ•ã‚©ãƒ¼ãƒ å´ã§ç¢ºèª
  toast("ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’é€ä¿¡ã—ã¾ã—ãŸï¼ˆãƒ•ã‚©ãƒ¼ãƒ ã®å›ç­”ã‚¿ãƒ–ã§ç¢ºèªã§ãã¾ã™ï¼‰");

  try{ bgmQuiz.pause(); }catch(e){}
  try{ bgmTeams.volume=0.85; bgmTeams.play(); }catch(e){}
  show(p2);
}
function goP3(){ try{ bgmTeams.pause(); }catch(e){} try{ bgmQuiz.volume=0.85; bgmQuiz.play(); }catch(e){} show(p3); }
function goP4(){ show(p4); }
function goP5(){ show(p5); }
function goP6(){ show(p6); }
function goP7(){ try{ seSuccess.currentTime=0; seSuccess.play(); }catch(e){} show(p7); }
function goP8(){ try{ bgmQuiz.pause(); }catch(e){} try{ bgmTeams.volume=0.85; bgmTeams.play(); }catch(e){} show(p8); }
function goP9(){ try{ bgmTeams.pause(); }catch(e){} show(p9); }

/* ====== ã‚¹ã‚¿ãƒ³ãƒ—æ¼”å‡º ====== */
function showStamp(){
  const s=document.getElementById('stamp');
  s.style.display='flex';
  setTimeout(()=>s.style.display='none',700);
}

/* ====== æ­£è§£æ™‚ã¯ pinpon ã®ã¿å†ç”Ÿ ====== */
function playCorrectSE(){
  try{ seCorrect.currentTime=0; seCorrect.play(); }catch(e){}
}

/* ====== ã‚¯ã‚¤ã‚º ====== */
(function initQ1(){
  const box = document.getElementById('q1-choices');
  const opts = [
    {label:"1ï¼‰ãŠè…¹ã«Î©è²¼ã‚Šã§å›ºå®šã•ã‚Œã¦ã„ã‚‹", correct:false},
    {label:"2ï¼‰ãƒ™ãƒƒãƒ‰ã‚’ä½ãã—ã¦ã„ã‚‹ãŸã‚æ¡å°¿ãƒãƒƒã‚°ãŒåºŠã«ã¤ã„ã¦ã„ã‚‹", correct:true},
    {label:"3ï¼‰æ„ŸæŸ“ãƒªã‚¹ã‚¯ãŒã‚ã‚‹ã‹ã‚‰æ—©ã‚ã«æŠœå»ã‚’ç›®æŒ‡ã—ã¦ã„ã‚‹", correct:false}
  ];
  opts.forEach(o=>{
    const b=document.createElement('button');
    b.className='choice-btn';
    b.dataset.se='none';              // â˜…ã‚¯ãƒªãƒƒã‚¯SEæŠ‘åˆ¶
    b.textContent=o.label;
    b.onclick=()=>{
      const judge = document.getElementById('q1-judge');
      const explain= document.getElementById('q1-explain');
      const next   = document.getElementById('q1-next');
      const afterImg = document.getElementById('q1-after-img');
      if(o.correct){
        judge.textContent="æ­£è§£ï¼"; judge.className="result ok";
        playCorrectSE();              // â˜…pinponã®ã¿
        showStamp();
        explain.innerHTML = "<strong>è§£ç­”</strong><ul style='margin:6px 0 0; padding-left:18px;'><li>ãƒãƒƒã‚°ãŒåºŠã«ã¤ã„ã¦ã‚‹ã¨æ±šã‚Œã¡ã‚ƒã£ã¦ã€æ„ŸæŸ“ã®ãƒªã‚¹ã‚¯ãŒä¸ŠãŒã‚‹ã‚“ã ã‚ˆã€‚</li><li>è†€èƒ±ã‚ˆã‚Šä½ãã¦ã€ã§ã‚‚åºŠã«ã¯ã¤ã‹ãªã„ä½ç½®ã«å›ºå®šã—ã‚ˆã†ã­ã€‚</li><li>ãƒãƒ¥ãƒ¼ãƒ–ãŒæŸµã«ã‹ã‹ã‚‰ãªã„ã‚ˆã†ã«ã‚‚æ³¨æ„ã ã‚ˆï¼</li></ul>";
        explain.style.display="block";
        next.style.display="block";
        setTimeout(()=>{ afterImg.style.display="block"; }, 750);
      }else{
        judge.textContent="æ®‹å¿µï¼ã‚‚ã†ä¸€åº¦é¸ã‚“ã§ã¿ã‚ˆã†ã€‚"; judge.className="result ng";
      }
    };
    box.appendChild(b);
  });
})();
(function initQ2(){
  const box = document.getElementById('q2-choices');
  const opts = [
    {label:"1ï¼‰é™æ­¢å‹ã«è¨­å®šã—ã¦ã„ã‚‹", correct:true},
    {label:"2ï¼‰ä½œå‹•ã‚„è¨­å®šå†…å®¹ã‚’è¨ªå®¤æ™‚ã«ç¢ºèªã—ã¦ã„ã‚‹", correct:false},
    {label:"3ï¼‰OHã‚¹ã‚±ãƒ¼ãƒ«ã‚’ã‚‚ã¨ã«è¤¥ç˜¡å¯¾ç­–ã‚’å†è©•ä¾¡ã—ã¦ã„ã‚‹", correct:false}
  ];
  opts.forEach(o=>{
    const b=document.createElement('button');
    b.className='choice-btn';
    b.dataset.se='none';              // â˜…ã‚¯ãƒªãƒƒã‚¯SEæŠ‘åˆ¶
    b.textContent=o.label;
    b.onclick=()=>{
      const judge = document.getElementById('q2-judge');
      const explain= document.getElementById('q2-explain');
      const next   = document.getElementById('q2-next');
      if(o.correct){
        judge.textContent="æ­£è§£ï¼"; judge.className="result ok";
        playCorrectSE();
        showStamp();
        explain.innerHTML = "<strong>è§£ç­”</strong><ul style='margin:6px 0 0; padding-left:18px;'><li>é™æ­¢å‹ã ã¨é™¤åœ§ãŒè¶³ã‚Šãªãã¦ã€è¤¥ç˜¡ã®ãƒªã‚¹ã‚¯ãŒä¸ŠãŒã£ã¡ã‚ƒã†ã€‚</li><li>åŸºæœ¬ã¯<strong>åœ§åˆ‡ã‚Šæ›¿ãˆå‹ï¼ˆäº¤äº’åœ§ï¼‰</strong>ã‚’ä½¿ãŠã†ï¼</li><li>è¨ªå®¤æ™‚ã«â€œã¡ã‚ƒã‚“ã¨å‹•ã„ã¦ã‚‹ï¼Ÿâ€ã£ã¦ç¢ºèªã™ã‚‹ã®ã‚‚å¤§äº‹ï¼</li></ul>";
        explain.style.display="block";
        next.style.display="block";
      }else{
        judge.textContent="æ®‹å¿µï¼ã‚‚ã†ä¸€åº¦é¸ã‚“ã§ã¿ã‚ˆã†ã€‚"; judge.className="result ng";
      }
    };
    box.appendChild(b);
  });
})();
(function initQ3(){
  const box = document.getElementById('q3-choices');
  const opts = [
    {label:"1ï¼‰å…¥é™¢å‰ãŒè‡ªç«‹ã ã£ãŸã‹ã‚‰J1", correct:true},
    {label:"2ï¼‰ã‚¹ãƒˆãƒƒã‚­ãƒ³ã‚°ã‚’è„±ã„ã§çš®è†šè¦³å¯Ÿ", correct:false},
    {label:"3ï¼‰ãƒªã‚¸ãƒ£ã‚¹ãƒˆã‚°ãƒ­ãƒ¼ãƒ–ã§é™¤åœ§", correct:false},
    {label:"4ï¼‰ãƒã‚¤ãƒªã‚¹ã‚¯åŠ ç®—å¯¾è±¡ã¨ã—ã¦è¤¥ç˜¡è¨ˆç”»æ›¸ä½œæˆ", correct:false}
  ];
  opts.forEach(o=>{
    const b=document.createElement('button');
    b.className='choice-btn';
    b.dataset.se='none';              // â˜…ã‚¯ãƒªãƒƒã‚¯SEæŠ‘åˆ¶
    b.textContent=o.label;
    b.onclick=()=>{
      const judge = document.getElementById('q3-judge');
      const explain= document.getElementById('q3-explain');
      const next   = document.getElementById('q3-next');
      if(o.correct){
        judge.textContent="æ­£è§£ï¼"; judge.className="result ok";
        playCorrectSE();
        showStamp();
        explain.innerHTML = "<strong>è§£ç­”</strong><ul style='margin:6px 0 0; padding-left:18px;'><li>ADLã¯<strong>â€œã„ã¾ã®çŠ¶æ…‹â€</strong>ã§è©•ä¾¡ã™ã‚‹ã‚“ã ã‚ˆï¼</li><li>ä»Šã®é™¶å­ã•ã‚“ã¯ä»‹åŠ©ãŒå¿…è¦ã ã‹ã‚‰<strong>B2ãã‚‰ã„</strong>ã€‚</li><li>è‡ªåŠ›ã§é™¤åœ§ã§ããªã„ãªã‚‰ã€å®šæœŸçš„ã«ä½“ä½å¤‰æ›ã‚„æ‘©æ“¦äºˆé˜²ã‚’ã—ã‚ˆã†ã€‚</li><li>ã‚¹ãƒˆãƒƒã‚­ãƒ³ã‚°ä¸­ã‚‚èµ¤ã¿ã‚„ã—ã‚ã®ãƒã‚§ãƒƒã‚¯å¿˜ã‚Œãšã«ï¼</li></ul>";
        explain.style.display="block";
        next.style.display="block";
      }else{
        judge.textContent="æ®‹å¿µï¼ã‚‚ã†ä¸€åº¦é¸ã‚“ã§ã¿ã‚ˆã†ã€‚"; judge.className="result ng";
      }
    };
    box.appendChild(b);
  });
})();
(function initQ4(){
  const box = document.getElementById('q4-choices');
  const opts = [
    {label:"1ï¼‰æ¡å°¿è¢‹ã‚’ç©ºã«ã—ã¦ã‹ã‚‰ç§»ä¹—ã—ãŸ", correct:false},
    {label:"2ï¼‰æ¡å°¿è¢‹ã‚’è†ã®ä¸Šã«ç½®ã„ãŸ", correct:true},
    {label:"3ï¼‰ã‚¯ãƒƒã‚·ãƒ§ãƒ³ã§ä½“åœ§åˆ†æ•£ã—ãŸ", correct:false},
    {label:"4ï¼‰å®šæœŸçš„ã«ãƒ—ãƒƒã‚·ãƒ¥ã‚¢ãƒƒãƒ—ã§é™¤åœ§ã—ãŸ", correct:false}
  ];
  opts.forEach(o=>{
    const b=document.createElement('button');
    b.className='choice-btn';
    b.dataset.se='none';              // â˜…ã‚¯ãƒªãƒƒã‚¯SEæŠ‘åˆ¶
    b.textContent=o.label;
    b.onclick=()=>{
      const judge = document.getElementById('q4-judge');
      const explain= document.getElementById('q4-explain');
      const next   = document.getElementById('q4-next');
      if(o.correct){
        judge.textContent="æ­£è§£ï¼"; judge.className="result ok";
        playCorrectSE();
        showStamp();
        explain.innerHTML = "<strong>è§£ç­”</strong><ul style='margin:6px 0 0; padding-left:18px;'><li>æ¡å°¿è¢‹ã‚’è†ã«ç½®ãã¨è†€èƒ±ã‚ˆã‚Šé«˜ããªã£ã¦<strong>é€†æµã®å±é™ºï¼</strong></li><li>ç§»ä¹—å‰ã«ä¸­èº«ã‚’ç©ºã«ã—ã¦ã€è†€èƒ±ã‚ˆã‚Šä½ã„ä½ç½®ã§ã‚­ãƒ¼ãƒ—ã—ã‚ˆã†ã€‚</li><li>ã‚¯ãƒƒã‚·ãƒ§ãƒ³ã¨é™¤åœ§ã§è¤¥ç˜¡ã‚‚äºˆé˜²ã§ãã‚‹ã‚ˆï¼</li></ul>";
        explain.style.display="block";
        next.style.display="block";
      }else{
        judge.textContent="æ®‹å¿µï¼ã‚‚ã†ä¸€åº¦é¸ã‚“ã§ã¿ã‚ˆã†ã€‚"; judge.className="result ng";
      }
    };
    box.appendChild(b);
  });
})();

/* ====== æŠ•ç¥¨é€ä¿¡ï¼ˆæ±ºå®šã®ã¿ï¼‰ ====== */
/* é€ä¿¡ã®æˆå¦ã«é–¢ã‚ã‚‰ãšã€å¿…ãšæœ€çµ‚ãƒšãƒ¼ã‚¸ã¸é·ç§» */
function submitVote(){
  const selectedRadio = document.querySelector('input[name="voteTeam"]:checked');
  if(!selectedRadio){ toast("æ¨ã—ãƒãƒ¼ãƒ ã‚’é¸ã‚“ã§ã­"); return; }

  const btn = document.getElementById('vote-submit');
  btn.disabled = true;

  if(GOOGLE_FORM_ACTION){
    const params = new URLSearchParams();
    params.append(ENTRY_NAME, nameEl.value ?? "");
    params.append(ENTRY_DEPT, groupEl.value ?? "");
    params.append(ENTRY_JOB,  jobEl.value ?? "");
    params.append(ENTRY_VOTE, selectedRadio.value);
    params.append("submit", "Submit");

    fetch(GOOGLE_FORM_ACTION, {
      method: "POST", mode: "no-cors",
      headers: { "Content-Type": "application/x-www-form-urlencoded" },
      body: params
    }).catch(()=>{});
  }

  // æˆå¦ã«é–¢ä¿‚ãªãæ¼”å‡ºâ†’æœ€çµ‚ãƒšãƒ¼ã‚¸ã¸
  toast("æŠ•ç¥¨ã‚’é€ä¿¡ã—ã¾ã—ãŸã€‚ã‚ã‚ŠãŒã¨ã†ï¼");
  setTimeout(()=>{ goP9(); btn.disabled = false; }, 600);
}
</script>
</body>
</html>
